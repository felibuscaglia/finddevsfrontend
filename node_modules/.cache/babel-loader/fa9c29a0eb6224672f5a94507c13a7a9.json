{"ast":null,"code":"import _defineProperty from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import Popup from'reactjs-popup';import style from'./PopUpStyle.module.css';import axios from'axios';import jwt from'jsonwebtoken';import{Alert}from'reactstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faLock,faTimes,faUser}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPopUp(_ref){var isRegister=_ref.isRegister;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showPass=_useState6[0],setShowPass=_useState6[1];function handleInputChange(e){setInput(_objectSpread(_objectSpread({},input),{},_defineProperty({},e.target.name,e.target.value)));}function handleSubmit(){axios.post('/auth/login',input).then(function(res){var user=jwt.decode(res.data);localStorage.setItem('user',JSON.stringify(res.data));window.location.replace(\"/user/\".concat(user.username));}).catch(function(err){return setError(true);});}function closePopUp(close){setInput({});setError(false);close();}return/*#__PURE__*/_jsx(Popup,{trigger:isRegister?/*#__PURE__*/_jsx(\"span\",{className:\"mainColor\",children:\"Log in\"}):/*#__PURE__*/_jsx(\"span\",{className:style.headerIcon,children:\"Login\"}),modal:true,children:function children(close){return/*#__PURE__*/_jsxs(\"div\",{id:style.mainDiv,children:[/*#__PURE__*/_jsxs(\"div\",{id:style.form,children:[/*#__PURE__*/_jsx(\"button\",{id:style.closeBtn,onClick:function onClick(){return closePopUp(close);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes})}),/*#__PURE__*/_jsx(\"h1\",{id:style.title,children:\"Login\"}),/*#__PURE__*/_jsx(\"span\",{style:{width:'85%'},children:\"Sign into your account here.\"}),/*#__PURE__*/_jsxs(\"div\",{className:error?style.inputcontainerError:style.inputcontainer,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faUser}),/*#__PURE__*/_jsx(\"input\",{name:\"username\",onChange:function onChange(e){return handleInputChange(e);},className:style.input,placeholder:\"Your username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:error?style.inputcontainerError:style.inputcontainer,tabindex:\"-1\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faLock}),/*#__PURE__*/_jsx(\"input\",{style:{marginLeft:'10px'},name:\"password\",type:showPass?'text':'password',onChange:function onChange(e){return handleInputChange(e);},className:style.input,placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"button\",{id:style.showPassBtn,onClick:function onClick(){return setShowPass(!showPass);},children:showPass?'Hide':'Show'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,id:style.createBtn,children:\"Sign in.\"})]}),error&&/*#__PURE__*/_jsx(Alert,{id:style.alert,color:\"danger\",children:\"Username or password not valid.\"})]});}});}export default LoginPopUp;","map":{"version":3,"sources":["/Users/felipebuscaglia/Henry/finddevsfrontend/src/Components/PopUps/LoginPopUp.jsx"],"names":["React","useState","Popup","style","axios","jwt","Alert","FontAwesomeIcon","faLock","faTimes","faUser","LoginPopUp","isRegister","input","setInput","error","setError","showPass","setShowPass","handleInputChange","e","target","name","value","handleSubmit","post","then","res","user","decode","data","localStorage","setItem","JSON","stringify","window","location","replace","username","catch","err","closePopUp","close","headerIcon","mainDiv","form","closeBtn","title","width","inputcontainerError","inputcontainer","marginLeft","showPassBtn","createBtn","alert"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Popup from 'reactjs-popup';\nimport style from './PopUpStyle.module.css';\nimport axios from 'axios';\nimport jwt from 'jsonwebtoken';\nimport { Alert } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faLock, faTimes, faUser } from '@fortawesome/free-solid-svg-icons';\n\n\nfunction LoginPopUp({ isRegister }) {\n\n    const [input, setInput] = useState({});\n    const [error, setError] = useState(false);\n    const [showPass, setShowPass] = useState(false);\n\n\n    function handleInputChange(e) {\n        setInput({\n            ...input,\n            [e.target.name]: e.target.value\n        })\n    }\n\n    function handleSubmit() {\n        axios.post('/auth/login', input)\n            .then(res => {\n                const user = jwt.decode(res.data);\n                localStorage.setItem('user', JSON.stringify(res.data));\n                window.location.replace(`/user/${user.username}`)\n            })\n            .catch(err => setError(true))\n    }\n\n    function closePopUp(close) {\n        setInput({});\n        setError(false);\n        close();\n    }\n\n    return (\n        <Popup trigger={isRegister ? <span className='mainColor'>Log in</span> : <span className={style.headerIcon}>Login</span>} modal>\n            {close => (\n                <div id={style.mainDiv}>\n                    <div id={style.form}>\n                        <button id={style.closeBtn} onClick={() => closePopUp(close)}><FontAwesomeIcon icon={faTimes} /></button>\n                        <h1 id={style.title}>Login</h1>\n                        <span style={{ width: '85%' }}>Sign into your account here.</span>\n                        <div className={error ? style.inputcontainerError : style.inputcontainer}>\n                            <FontAwesomeIcon icon={faUser} />\n                            <input name='username' onChange={(e) => handleInputChange(e)} className={style.input} placeholder='Your username'></input>\n                        </div>\n                        <div className={error ? style.inputcontainerError : style.inputcontainer} tabindex=\"-1\">\n                            <FontAwesomeIcon icon={faLock} />\n                            <input style={{ marginLeft: '10px' }} name='password' type={showPass ? 'text' : 'password'} onChange={(e) => handleInputChange(e)} className={style.input} placeholder='Password'></input>\n                            <button id={style.showPassBtn} onClick={() => setShowPass(!showPass)}>{showPass ? 'Hide' : 'Show'}</button>\n                        </div>\n                        <button onClick={handleSubmit} id={style.createBtn}>Sign in.</button>\n                    </div>\n                    {error &&\n                        <Alert id={style.alert} color=\"danger\">\n                            Username or password not valid.\n                        </Alert>\n                    }\n                </div>\n            )}\n        </Popup>\n    )\n}\n\nexport default LoginPopUp;"]},"metadata":{},"sourceType":"module"}