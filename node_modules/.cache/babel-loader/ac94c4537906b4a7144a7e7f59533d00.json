{"ast":null,"code":"import _regeneratorRuntime from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useLayoutEffect}from'react';import style from'./JobInfo.module.css';import axios from'axios';import{Link}from'react-router-dom';import{connect}from'react-redux';import Loading from'../../Media/Loading.gif';import Register from'../../Components/PopUps/RegisterPopUp';import jwt from'jsonwebtoken';import{setUserInfo as _setUserInfo}from'../../Actions/index';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faArrowLeft,faCheckCircle}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function JobInfo(_ref){var jobID=_ref.jobID,user=_ref.user,setUserInfo=_ref.setUserInfo;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),job=_useState2[0],setJob=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),applied=_useState4[0],setApplied=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isMember=_useState8[0],setIsMember=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),notUser=_useState10[0],setNotUser=_useState10[1];function asyncUseEffect(_x){return _asyncUseEffect.apply(this,arguments);}function _asyncUseEffect(){_asyncUseEffect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return setUserInfo(username);case 2:case\"end\":return _context.stop();}}},_callee);}));return _asyncUseEffect.apply(this,arguments);}useLayoutEffect(function(){if(!user.username){var _user=jwt.decode(JSON.parse(localStorage.getItem('user')));if(_user){asyncUseEffect(_user.username);}else setNotUser(true);}axios.get(\"/jobs/\".concat(jobID,\"/jobInfo\")).then(function(jobInfo){setJob(jobInfo.data);var found=jobInfo.data.Applicants.find(function(applicant){return applicant.id===user.id;});var findMember=jobInfo.data.project.users.find(function(member){return member.id===user.id&&member.userXprojects.endDate===null;});if(findMember){setIsMember(true);}else if(found&&found.username)setApplied(true);setLoading(false);}).catch(function(err){return console.log(err);});},[user]);function applyToJob(){axios.post(\"/jobs/\".concat(jobID,\"/applicants\"),{username:user.username}).then(function(res){return setApplied(true);}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsx(\"div\",{children:!loading?/*#__PURE__*/_jsxs(\"div\",{children:[job.project&&/*#__PURE__*/_jsxs(\"div\",{style:{background:job.project&&job.project.mainColor,color:job.project.brightness==='bright'?'#fff':'#000'},id:style.mainDiv,children:[/*#__PURE__*/_jsx(Link,{style:{color:job.project.brightness==='bright'?'#fff':'#000'},to:\"/jobs\",children:/*#__PURE__*/_jsxs(\"span\",{id:style.goBack,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{style:{marginRight:'10px'},icon:faArrowLeft}),\"More jobs\"]})}),/*#__PURE__*/_jsx(Link,{className:\"links\",to:\"/project/profile/\".concat(job.project.id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlex\",id:\"alignItemsCenter\",children:[/*#__PURE__*/_jsx(\"div\",{id:style.projectLogoDiv,children:/*#__PURE__*/_jsx(\"img\",{alt:\"Project logo\",src:job.project.logo,id:style.logo})}),/*#__PURE__*/_jsx(\"h5\",{style:{color:job.project.brightness==='bright'?'#fff':'#000'},className:\"font800\",children:job.project.name})]})}),/*#__PURE__*/_jsx(\"h1\",{id:style.jobTitle,children:job.title}),/*#__PURE__*/_jsxs(\"div\",{id:style.btnDiv,children:[notUser?/*#__PURE__*/_jsx(Register,{isJobProfile:true}):isMember?/*#__PURE__*/_jsxs(\"span\",{style:{color:job.project.brightness==='bright'?'#fff':'#000',background:job.project.brightness==='bright'?'#000':'#fff'},id:style.applied,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{id:style.appliedIcon,icon:faCheckCircle}),\" You are already part of \",job.project.name,\".\"]}):applied?/*#__PURE__*/_jsxs(\"span\",{style:{color:job.project.brightness==='bright'?'#fff':'#000',background:job.project.brightness==='bright'?'#000':'#fff'},id:style.applied,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{id:style.appliedIcon,icon:faCheckCircle}),\" You have applied to this job\"]}):/*#__PURE__*/_jsx(\"button\",{onClick:applyToJob,style:{color:job.project.brightness==='bright'?'#fff':'#000',border:job.project.brightness==='bright'?'4px solid #fff':'4px solid #000'},id:style.applyBtn,children:\"Apply to this job\"}),job.Applicants.length>=15&&!applied&&/*#__PURE__*/_jsx(\"span\",{className:\"font200\",children:\"\\uD83D\\uDD25 This job has received many applications\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:job.description},id:style.jobDescrip})})]}):/*#__PURE__*/_jsx(\"img\",{alt:\"Loading GIF\",id:style.loading,src:Loading})});}function mapStateToProps(state){return{user:state.userInfo};}function mapDispatchToProps(dispatch){return{setUserInfo:function setUserInfo(username){return dispatch(_setUserInfo(username));}};}export default connect(mapStateToProps,mapDispatchToProps)(JobInfo);","map":{"version":3,"sources":["/Users/felipebuscaglia/Henry/finddevsfrontend/src/Screens/JobInfo/JobInfo.jsx"],"names":["React","useState","useLayoutEffect","style","axios","Link","connect","Loading","Register","jwt","setUserInfo","FontAwesomeIcon","faArrowLeft","faCheckCircle","JobInfo","jobID","user","job","setJob","applied","setApplied","loading","setLoading","isMember","setIsMember","notUser","setNotUser","asyncUseEffect","username","decode","JSON","parse","localStorage","getItem","get","then","jobInfo","data","found","Applicants","find","applicant","id","findMember","project","users","member","userXprojects","endDate","catch","err","console","log","applyToJob","post","res","background","mainColor","color","brightness","mainDiv","goBack","marginRight","projectLogoDiv","logo","name","jobTitle","title","btnDiv","appliedIcon","border","applyBtn","length","__html","description","jobDescrip","mapStateToProps","state","userInfo","mapDispatchToProps","dispatch"],"mappings":"yeAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,eAA1B,KAAiD,OAAjD,CACA,MAAOC,CAAAA,KAAP,KAAkB,sBAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,OAAP,KAAoB,yBAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uCAArB,CACA,MAAOC,CAAAA,GAAP,KAAgB,cAAhB,CACA,OAASC,WAAW,GAAXA,CAAAA,YAAT,KAA4B,qBAA5B,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,OAASC,WAAT,CAAsBC,aAAtB,KAA2C,mCAA3C,C,wFAEA,QAASC,CAAAA,OAAT,MAA+C,IAA5BC,CAAAA,KAA4B,MAA5BA,KAA4B,CAArBC,IAAqB,MAArBA,IAAqB,CAAfN,WAAe,MAAfA,WAAe,eACrBT,QAAQ,CAAC,EAAD,CADa,wCACpCgB,GADoC,eAC/BC,MAD+B,8BAEbjB,QAAQ,CAAC,KAAD,CAFK,yCAEpCkB,OAFoC,eAE3BC,UAF2B,8BAGbnB,QAAQ,CAAC,IAAD,CAHK,yCAGpCoB,OAHoC,eAG3BC,UAH2B,8BAIXrB,QAAQ,CAAC,KAAD,CAJG,yCAIpCsB,QAJoC,eAI1BC,WAJ0B,8BAKbvB,QAAQ,CAAC,KAAD,CALK,0CAKpCwB,OALoC,gBAK3BC,UAL2B,wBAO5BC,CAAAA,cAP4B,sJAO3C,iBAA8BC,QAA9B,wIACWlB,CAAAA,WAAW,CAACkB,QAAD,CADtB,uDAP2C,iDAW3C1B,eAAe,CAAC,UAAM,CAClB,GAAI,CAACc,IAAI,CAACY,QAAV,CAAoB,CAChB,GAAMZ,CAAAA,KAAI,CAAGP,GAAG,CAACoB,MAAJ,CAAWC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX,CAAb,CACA,GAAIjB,KAAJ,CAAU,CACNW,cAAc,CAACX,KAAI,CAACY,QAAN,CAAd,CACH,CAFD,IAEOF,CAAAA,UAAU,CAAE,IAAF,CAAV,CACV,CACDtB,KAAK,CAAC8B,GAAN,iBAAmBnB,KAAnB,cACKoB,IADL,CACU,SAAAC,OAAO,CAAI,CACblB,MAAM,CAACkB,OAAO,CAACC,IAAT,CAAN,CACA,GAAMC,CAAAA,KAAK,CAAGF,OAAO,CAACC,IAAR,CAAaE,UAAb,CAAwBC,IAAxB,CAA6B,SAAAC,SAAS,QAAIA,CAAAA,SAAS,CAACC,EAAV,GAAiB1B,IAAI,CAAC0B,EAA1B,EAAtC,CAAd,CACA,GAAMC,CAAAA,UAAU,CAAGP,OAAO,CAACC,IAAR,CAAaO,OAAb,CAAqBC,KAArB,CAA2BL,IAA3B,CAAgC,SAAAM,MAAM,QAAIA,CAAAA,MAAM,CAACJ,EAAP,GAAc1B,IAAI,CAAC0B,EAAnB,EAAyBI,MAAM,CAACC,aAAP,CAAqBC,OAArB,GAAiC,IAA9D,EAAtC,CAAnB,CACA,GAAIL,UAAJ,CAAgB,CACZnB,WAAW,CAAC,IAAD,CAAX,CACH,CAFD,IAEO,IAAIc,KAAK,EAAIA,KAAK,CAACV,QAAnB,CAA6BR,UAAU,CAAC,IAAD,CAAV,CACpCE,UAAU,CAAC,KAAD,CAAV,CACH,CATL,EAUK2B,KAVL,CAUW,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAVd,EAWH,CAlBc,CAkBZ,CAAClC,IAAD,CAlBY,CAAf,CAoBA,QAASqC,CAAAA,UAAT,EAAsB,CAClBjD,KAAK,CAACkD,IAAN,iBAAoBvC,KAApB,gBAAwC,CAAEa,QAAQ,CAAEZ,IAAI,CAACY,QAAjB,CAAxC,EACKO,IADL,CACU,SAAAoB,GAAG,QAAInC,CAAAA,UAAU,CAAC,IAAD,CAAd,EADb,EAEK6B,KAFL,CAEW,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAFd,EAGH,CAED,mBACI,qBACK,CAAC7B,OAAD,cACG,uBACKJ,GAAG,CAAC2B,OAAJ,eACG,aAAK,KAAK,CAAE,CAAEY,UAAU,CAAEvC,GAAG,CAAC2B,OAAJ,EAAe3B,GAAG,CAAC2B,OAAJ,CAAYa,SAAzC,CAAoDC,KAAK,CAAEzC,GAAG,CAAC2B,OAAJ,CAAYe,UAAZ,GAA2B,QAA3B,CAAsC,MAAtC,CAA+C,MAA1G,CAAZ,CAAgI,EAAE,CAAExD,KAAK,CAACyD,OAA1I,wBACI,KAAC,IAAD,EAAM,KAAK,CAAE,CAAEF,KAAK,CAAEzC,GAAG,CAAC2B,OAAJ,CAAYe,UAAZ,GAA2B,QAA3B,CAAsC,MAAtC,CAA+C,MAAxD,CAAb,CAA+E,EAAE,CAAC,OAAlF,uBAA0F,cAAM,EAAE,CAAExD,KAAK,CAAC0D,MAAhB,wBAAwB,KAAC,eAAD,EAAiB,KAAK,CAAE,CAAEC,WAAW,CAAE,MAAf,CAAxB,CAAiD,IAAI,CAAElD,WAAvD,EAAxB,eAA1F,EADJ,cAEI,KAAC,IAAD,EAAM,SAAS,CAAC,OAAhB,CAAwB,EAAE,4BAAsBK,GAAG,CAAC2B,OAAJ,CAAYF,EAAlC,CAA1B,uBACI,aAAK,SAAS,CAAC,aAAf,CAA6B,EAAE,CAAC,kBAAhC,wBACI,YAAK,EAAE,CAAEvC,KAAK,CAAC4D,cAAf,uBACI,YAAK,GAAG,CAAC,cAAT,CAAwB,GAAG,CAAE9C,GAAG,CAAC2B,OAAJ,CAAYoB,IAAzC,CAA+C,EAAE,CAAE7D,KAAK,CAAC6D,IAAzD,EADJ,EADJ,cAII,WAAI,KAAK,CAAE,CAAEN,KAAK,CAAEzC,GAAG,CAAC2B,OAAJ,CAAYe,UAAZ,GAA2B,QAA3B,CAAsC,MAAtC,CAA+C,MAAxD,CAAX,CAA6E,SAAS,CAAC,SAAvF,UAAkG1C,GAAG,CAAC2B,OAAJ,CAAYqB,IAA9G,EAJJ,GADJ,EAFJ,cAUI,WAAI,EAAE,CAAE9D,KAAK,CAAC+D,QAAd,UAAyBjD,GAAG,CAACkD,KAA7B,EAVJ,cAWI,aAAK,EAAE,CAAEhE,KAAK,CAACiE,MAAf,WACK3C,OAAO,cAAG,KAAC,QAAD,EAAU,YAAY,CAAE,IAAxB,EAAH,CACJF,QAAQ,cAAG,cAAM,KAAK,CAAE,CAAEmC,KAAK,CAAEzC,GAAG,CAAC2B,OAAJ,CAAYe,UAAZ,GAA2B,QAA3B,CAAsC,MAAtC,CAA+C,MAAxD,CAAgEH,UAAU,CAAEvC,GAAG,CAAC2B,OAAJ,CAAYe,UAAZ,GAA2B,QAA3B,CAAsC,MAAtC,CAA+C,MAA3H,CAAb,CAAkJ,EAAE,CAAExD,KAAK,CAACgB,OAA5J,wBAAqK,KAAC,eAAD,EAAiB,EAAE,CAAEhB,KAAK,CAACkE,WAA3B,CAAwC,IAAI,CAAExD,aAA9C,EAArK,6BAA8PI,GAAG,CAAC2B,OAAJ,CAAYqB,IAA1Q,OAAH,CACJ9C,OAAO,cACH,cAAM,KAAK,CAAE,CAAEuC,KAAK,CAAEzC,GAAG,CAAC2B,OAAJ,CAAYe,UAAZ,GAA2B,QAA3B,CAAsC,MAAtC,CAA+C,MAAxD,CAAgEH,UAAU,CAAEvC,GAAG,CAAC2B,OAAJ,CAAYe,UAAZ,GAA2B,QAA3B,CAAsC,MAAtC,CAA+C,MAA3H,CAAb,CAAkJ,EAAE,CAAExD,KAAK,CAACgB,OAA5J,wBAAqK,KAAC,eAAD,EAAiB,EAAE,CAAEhB,KAAK,CAACkE,WAA3B,CAAwC,IAAI,CAAExD,aAA9C,EAArK,mCADG,cAEH,eAAQ,OAAO,CAAEwC,UAAjB,CAA6B,KAAK,CAAE,CAAEK,KAAK,CAAEzC,GAAG,CAAC2B,OAAJ,CAAYe,UAAZ,GAA2B,QAA3B,CAAsC,MAAtC,CAA+C,MAAxD,CAAgEW,MAAM,CAAErD,GAAG,CAAC2B,OAAJ,CAAYe,UAAZ,GAA2B,QAA3B,CAAsC,gBAAtC,CAAyD,gBAAjI,CAApC,CAAyL,EAAE,CAAExD,KAAK,CAACoE,QAAnM,+BALhB,CAOKtD,GAAG,CAACsB,UAAJ,CAAeiC,MAAf,EAAyB,EAAzB,EAA+B,CAACrD,OAAhC,eAA2C,aAAM,SAAS,CAAC,SAAhB,kEAPhD,GAXJ,GAFR,cAuBI,kCACI,YAAK,uBAAuB,CAAE,CAAEsD,MAAM,CAAExD,GAAG,CAACyD,WAAd,CAA9B,CAA2D,EAAE,CAAEvE,KAAK,CAACwE,UAArE,EADJ,EAvBJ,GADH,cA4BG,YAAK,GAAG,CAAC,aAAT,CAAuB,EAAE,CAAExE,KAAK,CAACkB,OAAjC,CAA0C,GAAG,CAAEd,OAA/C,EA7BR,EADJ,CAkCH,CAED,QAASqE,CAAAA,eAAT,CAAyBC,KAAzB,CAAgC,CAC5B,MAAO,CACH7D,IAAI,CAAE6D,KAAK,CAACC,QADT,CAAP,CAGH,CAED,QAASC,CAAAA,kBAAT,CAA6BC,QAA7B,CAAuC,CACnC,MAAO,CACHtE,WAAW,CAAE,qBAAAkB,QAAQ,QAAIoD,CAAAA,QAAQ,CAACtE,YAAW,CAACkB,QAAD,CAAZ,CAAZ,EADlB,CAAP,CAGH,CAED,cAAetB,CAAAA,OAAO,CAACsE,eAAD,CAAkBG,kBAAlB,CAAP,CAA6CjE,OAA7C,CAAf","sourcesContent":["import React, { useState, useLayoutEffect } from 'react';\nimport style from './JobInfo.module.css';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Loading from '../../Media/Loading.gif';\nimport Register from '../../Components/PopUps/RegisterPopUp';\nimport jwt from 'jsonwebtoken';\nimport { setUserInfo } from '../../Actions/index'; \nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft, faCheckCircle } from '@fortawesome/free-solid-svg-icons';\n\nfunction JobInfo({ jobID, user, setUserInfo }) {\n    const [job, setJob] = useState({});\n    const [applied, setApplied] = useState(false);\n    const [loading, setLoading] = useState(true);\n    const [isMember, setIsMember] = useState(false);\n    const [notUser, setNotUser] = useState(false);\n\n    async function asyncUseEffect(username) {\n        await (setUserInfo(username));\n    }\n\n    useLayoutEffect(() => {\n        if (!user.username) {\n            const user = jwt.decode(JSON.parse(localStorage.getItem('user')))\n            if (user) {\n                asyncUseEffect(user.username);\n            } else setNotUser (true)\n        }\n        axios.get(`/jobs/${jobID}/jobInfo`)\n            .then(jobInfo => {\n                setJob(jobInfo.data);\n                const found = jobInfo.data.Applicants.find(applicant => applicant.id === user.id);\n                const findMember = jobInfo.data.project.users.find(member => member.id === user.id && member.userXprojects.endDate === null);\n                if (findMember) {\n                    setIsMember(true);\n                } else if (found && found.username) setApplied(true)\n                setLoading(false);\n            })\n            .catch(err => console.log(err))\n    }, [user])\n\n    function applyToJob() {\n        axios.post(`/jobs/${jobID}/applicants`, { username: user.username })\n            .then(res => setApplied(true))\n            .catch(err => console.log(err))\n    }\n\n    return (\n        <div>\n            {!loading ?\n                <div>\n                    {job.project &&\n                        <div style={{ background: job.project && job.project.mainColor, color: job.project.brightness === 'bright' ? '#fff' : '#000' }} id={style.mainDiv}>\n                            <Link style={{ color: job.project.brightness === 'bright' ? '#fff' : '#000' }} to='/jobs'><span id={style.goBack}><FontAwesomeIcon style={{ marginRight: '10px' }} icon={faArrowLeft} />More jobs</span></Link>\n                            <Link className='links' to={`/project/profile/${job.project.id}`}>\n                                <div className='displayFlex' id='alignItemsCenter'>\n                                    <div id={style.projectLogoDiv}>\n                                        <img alt=\"Project logo\" src={job.project.logo} id={style.logo} />\n                                    </div>\n                                    <h5 style={{ color: job.project.brightness === 'bright' ? '#fff' : '#000' }} className='font800'>{job.project.name}</h5>\n                                </div>\n                            </Link>\n                            <h1 id={style.jobTitle}>{job.title}</h1>\n                            <div id={style.btnDiv}>\n                                {notUser ? <Register isJobProfile={true} /> :\n                                    isMember ? <span style={{ color: job.project.brightness === 'bright' ? '#fff' : '#000', background: job.project.brightness === 'bright' ? '#000' : '#fff' }} id={style.applied}><FontAwesomeIcon id={style.appliedIcon} icon={faCheckCircle} /> You are already part of {job.project.name}.</span> :\n                                        applied ?\n                                            <span style={{ color: job.project.brightness === 'bright' ? '#fff' : '#000', background: job.project.brightness === 'bright' ? '#000' : '#fff' }} id={style.applied}><FontAwesomeIcon id={style.appliedIcon} icon={faCheckCircle} /> You have applied to this job</span> :\n                                            <button onClick={applyToJob} style={{ color: job.project.brightness === 'bright' ? '#fff' : '#000', border: job.project.brightness === 'bright' ? '4px solid #fff' : '4px solid #000' }} id={style.applyBtn}>Apply to this job</button>\n                                }\n                                {job.Applicants.length >= 15 && !applied && <span className='font200'>🔥 This job has received many applications</span>}\n                            </div>\n                        </div>}\n                    <div>\n                        <div dangerouslySetInnerHTML={{ __html: job.description }} id={style.jobDescrip}></div>\n                    </div>\n                </div> :\n                <img alt=\"Loading GIF\" id={style.loading} src={Loading} />\n            }\n        </div>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        user: state.userInfo\n    }\n}\n\nfunction mapDispatchToProps (dispatch) {\n    return {\n        setUserInfo: username => dispatch(setUserInfo(username))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(JobInfo);"]},"metadata":{},"sourceType":"module"}