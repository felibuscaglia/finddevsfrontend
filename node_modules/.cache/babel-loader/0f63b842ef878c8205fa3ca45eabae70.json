{"ast":null,"code":"import _regeneratorRuntime from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useLayoutEffect}from'react';import Logo from'../../Media/invertedlogo.png';import style from'./StartupAdminPanel.module.css';import{Link}from'react-router-dom';import axios from'axios';import{connect}from'react-redux';import ProjectCard from'../../Components/ProjectCard/ProjectCard';import Empty from\"../../Media/emptyJob.svg\";import jwt from'jsonwebtoken';import{setUserInfo as _setUserInfo}from'../../Actions/index';import Loading from'../../Media/Loading.gif';import GoPremium from'../../Components/GoPremiumPopUp/GoPremium';import{Alert}from'reactstrap';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faDoorOpen,faTimesCircle,faCheckCircle}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function StartupAdminPanel(_ref){var user=_ref.user,limitOfPosts=_ref.limitOfPosts,setUserInfo=_ref.setUserInfo;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),alert=_useState6[0],setAlert=_useState6[1];function asyncUseEffect(_x){return _asyncUseEffect.apply(this,arguments);}function _asyncUseEffect(){_asyncUseEffect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return setUserInfo(username);case 2:case\"end\":return _context.stop();}}},_callee);}));return _asyncUseEffect.apply(this,arguments);}useLayoutEffect(function(){if(!user.username){var _user=jwt.decode(JSON.parse(localStorage.getItem('user')));if(_user){asyncUseEffect(_user.username);}else window.location.replace('/error');}axios.get(\"/users/\".concat(user.username,\"/projects\")).then(function(projectsData){projectsData.data=projectsData.data.sort(function(a,b){return b.userXprojects.isFounder-a.userXprojects.isFounder;});setProjects(projectsData.data);setLoading(false);}).catch(function(err){return console.log(err);});},[user]);function leaveProject(){setLoading(true);axios.delete(\"/users/\".concat(user.id,\"/\").concat(alert.id)).then(function(res){return window.location.reload();}).catch(function(err){return setLoading(false);});}if(loading){return/*#__PURE__*/_jsx(\"img\",{alt:\"Loading GIF\",src:Loading,id:style.loading});}return/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlex\",children:[/*#__PURE__*/_jsxs(\"div\",{id:style.fixedDiv,children:[/*#__PURE__*/_jsx(\"div\",{id:style.logoDiv,children:/*#__PURE__*/_jsx(\"img\",{alt:\"Inverted FindDevs logo\",src:Logo,id:style.invertedLogo})}),/*#__PURE__*/_jsx(Link,{id:style.link,to:\"/user/\".concat(user.username),children:/*#__PURE__*/_jsxs(\"span\",{className:\"font200\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faDoorOpen}),\" Go back\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{id:style.secondDiv,children:[/*#__PURE__*/_jsxs(\"div\",{id:style.projectDiv,children:[projects.length>0&&/*#__PURE__*/_jsx(\"h1\",{className:\"font800\",children:\"Your projects\"}),projects.length>0?projects.map(function(project){return project.userXprojects.endDate!==null?null:project.userXprojects.isFounder?/*#__PURE__*/_jsx(ProjectCard,{project:project,isFounder:true},project.id):/*#__PURE__*/_jsx(ProjectCard,{setAlert:setAlert,project:project,isFounder:false},project.id);}):/*#__PURE__*/_jsxs(\"div\",{id:style.emptyDiv,children:[/*#__PURE__*/_jsx(\"img\",{alt:\"No jobs posted\",src:Empty,id:style.empty}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{id:style.emptyTitle,children:\"Start gathering the team.\"}),/*#__PURE__*/_jsx(Link,{className:\"links\",to:\"/project/post\",children:/*#__PURE__*/_jsx(\"div\",{id:style.addBtn2,children:\"Post a project\"})})]})]})]}),projects.length===0?null:limitOfPosts?/*#__PURE__*/_jsx(GoPremium,{isAdminPanel:true}):/*#__PURE__*/_jsx(Link,{to:\"/project/post\",children:/*#__PURE__*/_jsx(\"button\",{id:style.postBtn,children:\"Post a project\"})}),alert&&/*#__PURE__*/_jsxs(Alert,{id:style.alert,color:\"danger\",children:[\"Are you sure you want to leave \",alert.name,\"? \",/*#__PURE__*/_jsx(\"div\",{className:\"displayFlex\",id:\"alignItemsCenter\",onClick:function onClick(){return setAlert(false);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{id:style.pick,icon:faTimesCircle})}),\" \",/*#__PURE__*/_jsx(\"div\",{onClick:leaveProject,className:\"displayFlex\",id:\"alignItemsCenter\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{id:style.pick,icon:faCheckCircle})})]})]})]});}function mapStateToProps(state){return{user:state.userInfo,limitOfPosts:state.limitOfPosts};}function mapDispatchToProps(dispatch){return{setUserInfo:function setUserInfo(username){return dispatch(_setUserInfo(username));}};}export default connect(mapStateToProps,mapDispatchToProps)(StartupAdminPanel);","map":{"version":3,"sources":["/Users/felipebuscaglia/Henry/finddevsfrontend/src/Screens/StartupAdminPanel/StartupAdminPanel.jsx"],"names":["React","useState","useLayoutEffect","Logo","style","Link","axios","connect","ProjectCard","jwt","setUserInfo","Loading","GoPremium","Alert","FontAwesomeIcon","faDoorOpen","faTimesCircle","faCheckCircle","StartupAdminPanel","user","limitOfPosts","projects","setProjects","loading","setLoading","alert","setAlert","asyncUseEffect","username","decode","JSON","parse","localStorage","getItem","window","location","replace","get","then","projectsData","data","sort","a","b","userXprojects","isFounder","catch","err","console","log","leaveProject","delete","id","res","reload","fixedDiv","logoDiv","invertedLogo","link","secondDiv","projectDiv","length","map","project","endDate","emptyDiv","Empty","empty","emptyTitle","addBtn2","postBtn","name","pick","mapStateToProps","state","userInfo","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useLayoutEffect } from 'react';\nimport Logo from '../../Media/invertedlogo.png';\nimport style from './StartupAdminPanel.module.css';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport ProjectCard from '../../Components/ProjectCard/ProjectCard';\nimport Empty from '../../Media/emptyJob.svg';\nimport jwt from 'jsonwebtoken';\nimport { setUserInfo } from '../../Actions/index';\nimport Loading from '../../Media/Loading.gif';\nimport GoPremium from '../../Components/GoPremiumPopUp/GoPremium';\nimport { Alert } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faDoorOpen, faTimesCircle, faCheckCircle } from '@fortawesome/free-solid-svg-icons';\n\nfunction StartupAdminPanel({ user, limitOfPosts, setUserInfo }) {\n    const [projects, setProjects] = useState([]);\n    const [loading, setLoading] = useState(true);\n    const [alert, setAlert] = useState(false);\n\n    async function asyncUseEffect(username) {\n        await (setUserInfo(username));\n    }\n\n    useLayoutEffect(() => {\n        if (!user.username) {\n            const user = jwt.decode(JSON.parse(localStorage.getItem('user')))\n            if (user) {\n                asyncUseEffect(user.username);\n            } else window.location.replace('/error');\n        }\n        axios.get(`/users/${user.username}/projects`)\n            .then(projectsData => {\n                projectsData.data = projectsData.data.sort((a, b) => {\n                    return b.userXprojects.isFounder - a.userXprojects.isFounder\n                })\n                setProjects(projectsData.data)\n                setLoading(false);\n            })\n            .catch(err => console.log(err))\n    }, [user])\n\n    function leaveProject () {\n        setLoading (true);\n        axios.delete (`/users/${user.id}/${alert.id}`)\n            .then (res => window.location.reload ())\n            .catch (err => setLoading (false))\n    }\n\n    if (loading) {\n        return <img alt=\"Loading GIF\" src={Loading} id={style.loading} />\n    }\n\n    return (\n        <div className='displayFlex'>\n            <div id={style.fixedDiv} >\n                <div id={style.logoDiv}>\n                    <img alt=\"Inverted FindDevs logo\" src={Logo} id={style.invertedLogo} />\n                </div>\n                <Link id={style.link} to={`/user/${user.username}`}><span className='font200'><FontAwesomeIcon icon={faDoorOpen} /> Go back</span></Link>\n            </div>\n            <div id={style.secondDiv}>\n                <div id={style.projectDiv}>\n                    {projects.length > 0 && <h1 className='font800'>Your projects</h1>}\n                    {projects.length > 0 ? projects.map(project => project.userXprojects.endDate !== null ? null : project.userXprojects.isFounder ? <ProjectCard key={project.id} project={project} isFounder={true} /> : <ProjectCard setAlert={setAlert} key={project.id} project={project} isFounder={false} />) :\n                        <div id={style.emptyDiv}>\n                            <img alt=\"No jobs posted\" src={Empty} id={style.empty} />\n                            <div>\n                                <h1 id={style.emptyTitle}>Start gathering the team.</h1>\n                                <Link className='links' to='/project/post'><div id={style.addBtn2}>Post a project</div></Link>\n                            </div>\n                        </div>}\n                </div>\n                {projects.length === 0 ? null : limitOfPosts ? \n                <GoPremium isAdminPanel={true} /> : \n                <Link to='/project/post'><button id={style.postBtn}>Post a project</button></Link>\n                }\n                {alert && <Alert id={style.alert} color=\"danger\">Are you sure you want to leave {alert.name}? <div className='displayFlex' id='alignItemsCenter' onClick={() => setAlert (false)} ><FontAwesomeIcon id={style.pick} icon={faTimesCircle} /></div> <div onClick={ leaveProject } className='displayFlex' id='alignItemsCenter'><FontAwesomeIcon id={style.pick} icon={faCheckCircle} /></div></Alert>}\n            </div>\n        </div>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        user: state.userInfo,\n        limitOfPosts: state.limitOfPosts\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        setUserInfo: username => dispatch(setUserInfo(username))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StartupAdminPanel);"]},"metadata":{},"sourceType":"module"}