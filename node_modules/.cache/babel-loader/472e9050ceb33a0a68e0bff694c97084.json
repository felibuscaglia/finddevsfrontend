{"ast":null,"code":"import _regeneratorRuntime from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import style from'./HeaderUser.module.css';import Logo from'../../Media/logo.png';import Button from'@material-ui/core/Button';import Menu from'@material-ui/core/Menu';import MenuItem from'@material-ui/core/MenuItem';import{Link}from'react-router-dom';import{connect}from'react-redux';import axios from'axios';import Register from'../PopUps/RegisterPopUp';import SearchBar from'./SearchBar';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faBell,faCircle,faCheckCircle,faTimesCircle}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function HeaderUser(props){var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),anchorEl2=_React$useState4[0],setAnchorEl2=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),deleted=_React$useState6[0],setDeleted=_React$useState6[1];var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};var handleClick2=function handleClick2(event){setAnchorEl2(event.currentTarget);};var handleClose2=function handleClose2(){setAnchorEl2(null);};function acceptInvitation(_x){return _acceptInvitation.apply(this,arguments);}function _acceptInvitation(){_acceptInvitation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(notification){var message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:message=\"\\uD83E\\uDD1D \".concat(props.userInfo.username,\" is now part of \").concat(notification.projectName,\" \\uD83E\\uDD1D\");_context.prev=1;_context.next=4;return axios.post(\"/users/\".concat(props.userInfo.username,\"/project/\").concat(notification.projectId),{jobTitle:notification.jobTitle});case 4:_context.next=6;return axios.post(\"/users/\".concat(notification.ownerUsername,\"/notifications\"),{content:message,type:'Joined',projectLogo:notification.projectLogo});case 6:_context.next=8;return axios.delete(\"/jobs/\".concat(notification.jobId));case 8:_context.next=10;return axios.delete(\"/users/\".concat(props.userInfo.id,\"/notifications/\").concat(notification.id));case 10:window.location.replace('/admin/panel');_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,13]]);}));return _acceptInvitation.apply(this,arguments);}function rejectInvitation(_x2,_x3){return _rejectInvitation.apply(this,arguments);}function _rejectInvitation(){_rejectInvitation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(notificationid,userId){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"/users/\".concat(userId,\"/notifications/\").concat(notificationid));case 3:setDeleted(deleted.concat(notificationid));_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return _rejectInvitation.apply(this,arguments);}function changeScreen(){props.userInfo.username?window.location.replace(\"/user/\".concat(props.userInfo.username)):window.location.replace('/');}function logOut(){localStorage.removeItem('user');window.location.replace('/');}if(props.pathname.pathname.indexOf('/project/settings')===-1&&props.pathname.pathname.indexOf('/project/members')===-1&&props.pathname.pathname!=='/'&&props.pathname.pathname!=='/project/post'&&props.pathname.pathname!=='/admin/panel'&&props.pathname.pathname.indexOf('project/jobPanel')!==1&&props.pathname.pathname.indexOf('project/addJob')!==1){return/*#__PURE__*/_jsxs(\"div\",{id:style.header,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlex\",id:\"alignItemsCenter\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"Logo\",onClick:changeScreen,src:Logo,id:style.logo}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlex\",children:[/*#__PURE__*/_jsx(Link,{to:\"/jobs\",className:\"links\",children:/*#__PURE__*/_jsx(\"span\",{id:style.headerIcon,children:\"Be part of a startup\"})}),/*#__PURE__*/_jsx(Link,{to:\"/workers\",className:\"links\",children:/*#__PURE__*/_jsx(\"span\",{id:style.headerIcon,children:\"Find collaborators\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlex\",id:\"alignItemsCenter\",children:[props.pathname.pathname!=='/suggestions'&&/*#__PURE__*/_jsx(SearchBar,{}),props.userInfo.username?/*#__PURE__*/_jsxs(\"div\",{id:style.dropdownDiv,children:[/*#__PURE__*/_jsxs(Button,{\"aria-controls\":\"simple-menu\",\"aria-haspopup\":\"true\",onClick:handleClick,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{id:\"popUpIcn\",icon:faBell}),props.notifications&&props.notifications.length>0&&/*#__PURE__*/_jsx(FontAwesomeIcon,{style:{display:props.notifications.length===deleted.length?'none':'flex'},id:style.alert,icon:faCircle})]}),/*#__PURE__*/_jsx(Menu,{id:\"simple-menu\",anchorEl:anchorEl,keepMounted:true,open:Boolean(anchorEl),onClose:handleClose,className:style.notificationDiv,children:props.notifications&&props.notifications.map(function(notification){return/*#__PURE__*/_jsx(MenuItem,{style:{display:deleted.includes(notification.id)?'none':'block'},id:\"alignItemsFS\",className:\"displayFlexColumn\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlex\",id:\"alignItemsCenter\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"Startup logo\",onClick:function onClick(){return window.location.replace(\"/project/profile/\".concat(notification.projectId));},src:notification.projectLogo,id:style.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"font800\",children:notification.content}),notification.type==='Invitation'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return acceptInvitation(notification);},style:{color:'green'},className:style.dropdownBtn,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCheckCircle})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return rejectInvitation(notification.id,notification.userId);},style:{color:'red'},className:style.dropdownBtn,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimesCircle})})]}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return rejectInvitation(notification.id,notification.userId);},style:{color:'red'},className:style.dropdownBtn,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimesCircle})})]})},notification.id);})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{\"aria-controls\":\"simple-menu\",\"aria-haspopup\":\"true\",onClick:handleClick2,children:/*#__PURE__*/_jsx(\"div\",{className:\"displayFlex\",id:\"alignItemsCenter\",children:/*#__PURE__*/_jsx(\"div\",{style:{backgroundImage:\"url(\".concat(props.userInfo.profilePic,\")\")},id:style.profilePic})})}),/*#__PURE__*/_jsxs(Menu,{id:\"simple-menu\",anchorEl:anchorEl2,keepMounted:true,open:Boolean(anchorEl2),onClose:handleClose2,className:style.userMenu,children:[/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){return window.location.replace(\"/user/\".concat(props.userInfo.username));},children:/*#__PURE__*/_jsx(\"div\",{className:style.dropdown,children:/*#__PURE__*/_jsx(\"span\",{children:\"Your profile\"})})}),/*#__PURE__*/_jsx(MenuItem,{onClick:function onClick(){return window.location.replace('/edit/user/me');},children:/*#__PURE__*/_jsx(\"div\",{className:style.dropdown,children:/*#__PURE__*/_jsx(\"span\",{children:\"Edit your profile\"})})}),/*#__PURE__*/_jsx(Link,{to:\"/admin/panel\",className:\"links\",children:/*#__PURE__*/_jsx(MenuItem,{children:/*#__PURE__*/_jsx(\"div\",{className:style.dropdown,children:/*#__PURE__*/_jsx(\"span\",{children:\"Your startups\"})})})}),/*#__PURE__*/_jsx(\"hr\",{id:\"line\"}),/*#__PURE__*/_jsx(MenuItem,{onClick:logOut,children:/*#__PURE__*/_jsx(\"div\",{className:style.dropdown,children:/*#__PURE__*/_jsx(\"span\",{children:\"Log out\"})})}),/*#__PURE__*/_jsx(\"hr\",{id:\"line\"}),!props.limitOfPosts?/*#__PURE__*/_jsx(Link,{className:\"links\",to:\"/project/post\",children:/*#__PURE__*/_jsx(\"button\",{id:style.postBtn,children:\"Post a project\"})}):null]})]})]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Register,{isHomepage:false})})]})]});}else return null;}function mapStateToProps(state){return{userInfo:state.userInfo,notifications:state.notifications,limitOfPosts:state.limitOfPosts};}export default connect(mapStateToProps,null)(HeaderUser);","map":{"version":3,"sources":["/Users/felipebuscaglia/Henry/finddevsfrontend/src/Components/HeaderUser/HeaderUser.jsx"],"names":["React","style","Logo","Button","Menu","MenuItem","Link","connect","axios","Register","SearchBar","FontAwesomeIcon","faBell","faCircle","faCheckCircle","faTimesCircle","HeaderUser","props","useState","anchorEl","setAnchorEl","anchorEl2","setAnchorEl2","deleted","setDeleted","handleClick","event","currentTarget","handleClose","handleClick2","handleClose2","acceptInvitation","notification","message","userInfo","username","projectName","post","projectId","jobTitle","ownerUsername","content","type","projectLogo","delete","jobId","id","window","location","replace","console","log","rejectInvitation","notificationid","userId","concat","changeScreen","logOut","localStorage","removeItem","pathname","indexOf","header","logo","headerIcon","dropdownDiv","notifications","length","display","alert","Boolean","notificationDiv","map","includes","icon","color","dropdownBtn","backgroundImage","profilePic","userMenu","dropdown","limitOfPosts","postBtn","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from 'react';\nimport style from './HeaderUser.module.css';\nimport Logo from '../../Media/logo.png';\nimport Button from '@material-ui/core/Button';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport Register from '../PopUps/RegisterPopUp';\nimport SearchBar from './SearchBar';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBell, faCircle, faCheckCircle, faTimesCircle } from '@fortawesome/free-solid-svg-icons';\n\nfunction HeaderUser(props) {\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [anchorEl2, setAnchorEl2] = React.useState(null);\n    const [deleted, setDeleted] = React.useState([]);\n\n    const handleClick = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleClick2 = (event) => {\n        setAnchorEl2(event.currentTarget);\n    };\n\n    const handleClose2 = () => {\n        setAnchorEl2(null);\n    };\n\n    async function acceptInvitation(notification) {\n        var message = `ü§ù ${props.userInfo.username} is now part of ${notification.projectName} ü§ù`;\n        try {\n            await axios.post(`/users/${props.userInfo.username}/project/${notification.projectId}`, { jobTitle: notification.jobTitle });\n            await axios.post(`/users/${notification.ownerUsername}/notifications`, { content: message, type: 'Joined', projectLogo: notification.projectLogo });\n            await axios.delete(`/jobs/${notification.jobId}`);\n            await axios.delete(`/users/${props.userInfo.id}/notifications/${notification.id}`)\n            window.location.replace('/admin/panel');\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    async function rejectInvitation(notificationid, userId) {\n        try {\n            await axios.delete(`/users/${userId}/notifications/${notificationid}`);\n            setDeleted(deleted.concat(notificationid))\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    function changeScreen() {\n        props.userInfo.username ? window.location.replace(`/user/${props.userInfo.username}`) : window.location.replace('/');\n    }\n\n    function logOut() {\n        localStorage.removeItem('user');\n        window.location.replace('/');\n    }\n\n    if (props.pathname.pathname.indexOf('/project/settings') === -1 && props.pathname.pathname.indexOf('/project/members') === -1 && props.pathname.pathname !== '/' && props.pathname.pathname !== '/project/post' && props.pathname.pathname !== '/admin/panel' && props.pathname.pathname.indexOf('project/jobPanel') !== 1 && props.pathname.pathname.indexOf('project/addJob') !== 1) {\n        return (\n            <div id={style.header}>\n                <div className=\"displayFlex\" id=\"alignItemsCenter\">\n                    <img alt=\"Logo\" onClick={changeScreen} src={Logo} id={style.logo} />\n                    <div className=\"displayFlex\">\n                        <Link to='/jobs' className='links'><span id={style.headerIcon}>Be part of a startup</span></Link>\n                        <Link to='/workers' className='links'><span id={style.headerIcon}>Find collaborators</span></Link>\n                    </div>\n                </div>\n                <div className='displayFlex' id='alignItemsCenter'>\n                    {props.pathname.pathname !== '/suggestions' && <SearchBar />}\n                    {props.userInfo.username ?\n                        <div id={style.dropdownDiv}>\n                            <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick}>\n                                <FontAwesomeIcon id='popUpIcn' icon={faBell} />\n                                {props.notifications && props.notifications.length > 0 && <FontAwesomeIcon style={{ display: props.notifications.length === deleted.length ? 'none' : 'flex' }} id={style.alert} icon={faCircle} />}\n                            </Button>\n                            <Menu\n                                id=\"simple-menu\"\n                                anchorEl={anchorEl}\n                                keepMounted\n                                open={Boolean(anchorEl)}\n                                onClose={handleClose}\n                                className={style.notificationDiv}\n                            >\n                                {props.notifications && props.notifications.map(notification =>\n                                    <MenuItem key={notification.id} style={{ display: deleted.includes(notification.id) ? 'none' : 'block' }} id='alignItemsFS' className='displayFlexColumn'>\n                                        <div className='displayFlex' id='alignItemsCenter'>\n                                            <img alt=\"Startup logo\" onClick={() => window.location.replace(`/project/profile/${notification.projectId}`)} src={notification.projectLogo} id={style.icon} />\n                                            <span className='font800'>{notification.content}</span>\n                                            {notification.type === 'Invitation' ?\n                                                <div>\n                                                    <button onClick={() => acceptInvitation(notification)} style={{ color: 'green' }} className={style.dropdownBtn}><FontAwesomeIcon icon={faCheckCircle} /></button>\n                                                    <button onClick={() => rejectInvitation(notification.id, notification.userId)} style={{ color: 'red' }} className={style.dropdownBtn}><FontAwesomeIcon icon={faTimesCircle} /></button>\n                                                </div> :\n                                                <button onClick={() => rejectInvitation(notification.id, notification.userId)} style={{ color: 'red' }} className={style.dropdownBtn}><FontAwesomeIcon icon={faTimesCircle} /></button>\n                                            }\n                                        </div>\n                                    </MenuItem>\n                                )}\n                            </Menu>\n                            <div>\n                                <Button aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleClick2}>\n                                    <div className='displayFlex' id='alignItemsCenter'>\n                                        <div style={{ backgroundImage: `url(${props.userInfo.profilePic})` }} id={style.profilePic}></div>\n                                    </div>\n                                </Button>\n                                <Menu\n                                    id=\"simple-menu\"\n                                    anchorEl={anchorEl2}\n                                    keepMounted\n                                    open={Boolean(anchorEl2)}\n                                    onClose={handleClose2}\n                                    className={style.userMenu}\n                                >\n                                    <MenuItem onClick={() => window.location.replace(`/user/${props.userInfo.username}`)}>\n                                        <div className={style.dropdown}>\n                                            <span>Your profile</span>\n                                        </div>\n                                    </MenuItem>\n                                    <MenuItem onClick={() => window.location.replace('/edit/user/me')}>\n                                        <div className={style.dropdown}>\n                                            <span>Edit your profile</span>\n                                        </div>\n                                    </MenuItem>\n                                    <Link to='/admin/panel' className='links'>\n                                        <MenuItem>\n                                            <div className={style.dropdown}>\n                                                <span>Your startups</span>\n                                            </div>\n                                        </MenuItem>\n                                    </Link>\n                                    <hr id='line'></hr>\n                                    <MenuItem onClick={logOut}>\n                                        <div className={style.dropdown}>\n                                            <span>Log out</span>\n                                        </div>\n                                    </MenuItem>\n                                    <hr id='line'></hr>\n                                    {!props.limitOfPosts ? <Link className='links' to='/project/post'><button id={style.postBtn}>Post a project</button></Link> : null}\n                                </Menu>\n                            </div>\n                        </div> :\n                        <div>\n                            <Register isHomepage={false} />\n                        </div>}\n                </div>\n            </div>\n        )\n    } else return null;\n}\n\n\n\nfunction mapStateToProps(state) {\n    return {\n        userInfo: state.userInfo,\n        notifications: state.notifications,\n        limitOfPosts: state.limitOfPosts\n    }\n}\n\nexport default connect(mapStateToProps, null)(HeaderUser);"]},"metadata":{},"sourceType":"module"}