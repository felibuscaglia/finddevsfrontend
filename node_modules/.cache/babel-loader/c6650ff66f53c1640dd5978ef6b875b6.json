{"ast":null,"code":"import _regeneratorRuntime from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useLayoutEffect}from'react';import Logo from'../../Media/invertedlogo.png';import style from'./PostStartup.module.css';import{Link}from'react-router-dom';import axios from'axios';import{connect}from'react-redux';import{BlockPicker}from'react-color';import{getBrightness}from'../../utils';import Loading from'../../Media/Loading.gif';import{setUserInfo as _setUserInfo}from'../../Actions/index';import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PostStartup(_ref){var user=_ref.user,limitOfPosts=_ref.limitOfPosts,setUserInfo=_ref.setUserInfo;var _useState=useState({mainColor:'#000'}),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState('https://i.ibb.co/m82SNJT/profile-pic-startup-sin-marco.png'),_useState4=_slicedToArray(_useState3,2),preview=_useState4[0],setPreview=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),firstCheck=_useState12[0],setFirstCheck=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),inputErrors=_useState14[0],setInputErrors=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),btnDisabled=_useState16[0],setDisabled=_useState16[1];function asyncUseEffect(_x){return _asyncUseEffect.apply(this,arguments);}function _asyncUseEffect(){_asyncUseEffect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return setUserInfo(username);case 2:case\"end\":return _context.stop();}}},_callee);}));return _asyncUseEffect.apply(this,arguments);}useLayoutEffect(function(){if(!user.username){var _user=jwt.decode(JSON.parse(localStorage.getItem('user')));if(_user){asyncUseEffect(_user.username);}else window.location.replace('/error');}if(limitOfPosts)window.location.replace('/error');setTimeout(function(){setFirstCheck(false);},2000);},[limitOfPosts]);function handleInputChange(e){var copyOfErrors=inputErrors;var noErrors=true;if(e.hex)return setInput(_objectSpread(_objectSpread({},input),{},{mainColor:e.hex}));if(e.target.name==='website'||e.target.name==='workZone'||e.target.name==='productHunt'||e.target.name==='twitter'||e.target.name==='linkedIn'){if(!/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/.test(e.target.value))copyOfErrors=_objectSpread(_objectSpread({},copyOfErrors),{},_defineProperty({},e.target.name,true));else copyOfErrors=_objectSpread(_objectSpread({},copyOfErrors),{},_defineProperty({},e.target.name,false));}for(var key in copyOfErrors){if(copyOfErrors[key])noErrors=false;}if(noErrors)setDisabled(false);else setDisabled(true);setInputErrors(copyOfErrors);setInput(_objectSpread(_objectSpread({},input),{},_defineProperty({},e.target.name,e.target.value)));}function handleSubmit(){setLoading(true);if(!file)input.logo='https://i.ibb.co/m82SNJT/profile-pic-startup-sin-marco.png';input.isPremium=user.isPremium;input.ownerId=user.id;input.brightness=getBrightness(input.mainColor);axios.post(\"/projects/\".concat(user.username),input).then(function(res){if(file){var newForm=new FormData();newForm.append('image',file);var config={headers:{'content-type':'multipart/form-data'}};return axios.post(\"/projects/\".concat(res.data.id,\"/logo\"),newForm,config);}else window.location.replace('/admin/panel');}).then(function(res){return window.location.replace('/admin/panel');}).catch(function(err){return setError(true);});}function check(e){setFile(e.target.files[0]);setPreview(URL.createObjectURL(e.target.files[0]));}if(firstCheck){return/*#__PURE__*/_jsx(\"img\",{alt:\"Loading GIF\",id:style.firstCheck,src:Loading});}return/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlex\",children:[/*#__PURE__*/_jsxs(\"div\",{id:style.fixedDiv,children:[/*#__PURE__*/_jsx(\"div\",{id:style.logoDiv,children:/*#__PURE__*/_jsx(Link,{to:\"/user/\".concat(user.username),children:/*#__PURE__*/_jsx(\"img\",{alt:\"Project logo\",src:Logo,id:style.invertedLogo})})}),/*#__PURE__*/_jsx(Link,{id:style.link,to:\"/admin/panel\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font200\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-door-open\"}),\" Back to Admin Panel\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{id:style.secondDiv,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font800\",children:\"Let's start.\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"font200\",children:[\"Provide the necessary information for developers to fully understand what your project is about. \",/*#__PURE__*/_jsx(\"br\",{}),\"Remember, the more details you provide, the more users will be interested in what you are doing. \",/*#__PURE__*/_jsx(\"br\",{}),\"Don't worry, you can always edit this later! \",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"Project name *\"}),/*#__PURE__*/_jsx(\"input\",{maxLength:\"100\",onChange:function onChange(e){return handleInputChange(e);},name:\"name\",className:style.input})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"Logo *\"}),/*#__PURE__*/_jsxs(\"div\",{id:style.profilePicDiv,children:[/*#__PURE__*/_jsx(\"div\",{id:style.profilePic,children:/*#__PURE__*/_jsx(\"img\",{alt:\"Selected project logo\",src:preview,ID:style.logo})}),/*#__PURE__*/_jsxs(\"label\",{for:style.fileDrop,id:style.logoLabel,children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-cloud-upload-alt\"}),\" Upload Logo\"]}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return check(e);},id:style.fileDrop,type:\"file\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{style:{marginBottom:'25px'},className:\"font600\",children:\"Main color *\"}),/*#__PURE__*/_jsx(BlockPicker,{onChange:function onChange(e){return handleInputChange(e);},color:input.mainColor,triangle:'hide'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'25px'},className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"Website\"}),/*#__PURE__*/_jsx(\"input\",{style:{border:inputErrors.website?'2px solid red':'2px solid #e7e7e7'},maxLength:\"255\",onChange:function onChange(e){return handleInputChange(e);},name:\"website\",className:style.input}),inputErrors.website&&/*#__PURE__*/_jsx(\"span\",{className:style.errors,children:\"Please enter a valid URL.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"Work Zone *\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"advert\",children:[\"Keep in mind that it will be your team's designated workspace. It can be a link to Slack,\",/*#__PURE__*/_jsx(\"br\",{}),\" Flowdock or WebEx, for example.\"]}),/*#__PURE__*/_jsx(\"input\",{style:{border:inputErrors.workZone?'2px solid red':'2px solid #e7e7e7'},maxLength:\"255\",onChange:function onChange(e){return handleInputChange(e);},value:input.workZone,name:\"workZone\",className:style.input}),inputErrors.workZone&&/*#__PURE__*/_jsx(\"span\",{className:style.errors,children:\"Please enter a valid URL.\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:style.socialDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",id:\"alignItemsFS\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font800\",children:[/*#__PURE__*/_jsx(\"i\",{style:{color:'#DA552F'},class:\"fab fa-product-hunt\"}),\" Product Hunt\"]}),/*#__PURE__*/_jsx(\"input\",{style:{border:inputErrors.productHunt?'2px solid red':'2px solid #e7e7e7'},maxLength:\"255\",name:\"productHunt\",onChange:function onChange(e){return handleInputChange(e);},className:style.socialMediaInput}),inputErrors.productHunt&&/*#__PURE__*/_jsx(\"span\",{className:style.errors,children:\"Please enter a valid URL.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",id:\"alignItemsFS\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font800\",children:[/*#__PURE__*/_jsx(\"i\",{style:{color:' #00acee'},class:\"fab fa-twitter-square\"}),\" Twitter\"]}),/*#__PURE__*/_jsx(\"input\",{style:{border:inputErrors.twitter?'2px solid red':'2px solid #e7e7e7'},maxLength:\"255\",name:\"twitter\",onChange:function onChange(e){return handleInputChange(e);},className:style.socialMediaInput}),inputErrors.twitter&&/*#__PURE__*/_jsx(\"span\",{className:style.errors,children:\"Please enter a valid URL.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",id:\"alignItemsFS\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font800\",children:[/*#__PURE__*/_jsx(\"i\",{style:{color:'#0e76a8'},class:\"fab fa-linkedin\"}),\" LinkedIn\"]}),/*#__PURE__*/_jsx(\"input\",{style:{border:inputErrors.linkedIn?'2px solid red':'2px solid #e7e7e7'},maxLength:\"255\",name:\"linkedIn\",onChange:function onChange(e){return handleInputChange(e);},className:style.socialMediaInput}),inputErrors.linkedIn&&/*#__PURE__*/_jsx(\"span\",{className:style.errors,children:\"Please enter a valid URL.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"One-line description *\"}),/*#__PURE__*/_jsx(\"span\",{className:\"advert\",children:\"Describe your project in just a few words.\"}),/*#__PURE__*/_jsx(\"input\",{maxLength:\"100\",onChange:function onChange(e){return handleInputChange(e);},name:\"oneLineDescription\",className:style.input})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"Describe your project *\"}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){return handleInputChange(e);},name:\"description\",maxLength:\"2000\",className:style.textarea})]}),error&&/*#__PURE__*/_jsx(\"div\",{id:style.alert,class:\"alert alert-danger\",role:\"alert\",children:\"Please complete all the necessary fields.\"}),loading&&!error?/*#__PURE__*/_jsx(\"img\",{alt:\"Loading GIF\",id:style.loading,src:Loading}):/*#__PURE__*/_jsx(\"button\",{disabled:btnDisabled,onClick:handleSubmit,id:style.uploadBtn,children:\"Post your project!\"})]})]});}function mapStateToProps(state){return{user:state.userInfo,limitOfPosts:state.limitOfPosts};}function mapDispatchToProps(dispatch){return{setUserInfo:function setUserInfo(username){return dispatch(_setUserInfo(username));}};}export default connect(mapStateToProps,mapDispatchToProps)(PostStartup);","map":{"version":3,"sources":["/Users/felipebuscaglia/Henry/FindDevs/client/src/Screens/PostStartup/PostStartup.jsx"],"names":["React","useState","useLayoutEffect","Logo","style","Link","axios","connect","BlockPicker","getBrightness","Loading","setUserInfo","jwt","PostStartup","user","limitOfPosts","mainColor","input","setInput","preview","setPreview","file","setFile","error","setError","loading","setLoading","firstCheck","setFirstCheck","inputErrors","setInputErrors","btnDisabled","setDisabled","asyncUseEffect","username","decode","JSON","parse","localStorage","getItem","window","location","replace","setTimeout","handleInputChange","e","copyOfErrors","noErrors","hex","target","name","test","value","key","handleSubmit","logo","isPremium","ownerId","id","brightness","post","then","res","newForm","FormData","append","config","headers","data","catch","err","check","files","URL","createObjectURL","fixedDiv","logoDiv","invertedLogo","link","secondDiv","profilePicDiv","profilePic","fileDrop","logoLabel","marginBottom","marginTop","border","website","errors","workZone","socialDiv","color","productHunt","socialMediaInput","twitter","linkedIn","textarea","alert","uploadBtn","mapStateToProps","state","userInfo","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useLayoutEffect } from 'react';\nimport Logo from '../../Media/invertedlogo.png';\nimport style from './PostStartup.module.css';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { BlockPicker } from 'react-color';\nimport { getBrightness } from '../../utils';\nimport Loading from '../../Media/Loading.gif';\nimport { setUserInfo } from '../../Actions/index';\nimport jwt from 'jsonwebtoken';\n\nfunction PostStartup({ user, limitOfPosts, setUserInfo }) {\n    const [input, setInput] = useState({ mainColor: '#000' });\n    const [preview, setPreview] = useState('https://i.ibb.co/m82SNJT/profile-pic-startup-sin-marco.png');\n    const [file, setFile] = useState(null);\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [firstCheck, setFirstCheck] = useState(true);\n    const [inputErrors, setInputErrors] = useState({});\n    const [btnDisabled, setDisabled] = useState(false);\n\n    async function asyncUseEffect(username) {\n        await (setUserInfo(username));\n    }\n\n    useLayoutEffect(() => {\n        if (!user.username) {\n            const user = jwt.decode(JSON.parse(localStorage.getItem('user')))\n            if (user) {\n                asyncUseEffect(user.username);\n            } else window.location.replace('/error');\n        }\n        if (limitOfPosts) window.location.replace('/error');\n        setTimeout(() => {\n            setFirstCheck(false);\n        }, 2000)\n    }, [limitOfPosts])\n\n    function handleInputChange(e) {\n        var copyOfErrors = inputErrors;\n        var noErrors = true;\n\n        if (e.hex) return setInput({ ...input, mainColor: e.hex });\n\n        if (e.target.name === 'website' || e.target.name === 'workZone' || e.target.name === 'productHunt' || e.target.name === 'twitter' || e.target.name === 'linkedIn') {\n            if (!/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/.test(e.target.value)) copyOfErrors = { ...copyOfErrors, [e.target.name]: true };\n            else copyOfErrors = { ...copyOfErrors, [e.target.name]: false }\n        }\n\n        for (const key in copyOfErrors) if (copyOfErrors[key]) noErrors = false;\n\n        if (noErrors) setDisabled(false);\n        else setDisabled(true);\n\n        setInputErrors(copyOfErrors);\n\n        setInput({\n            ...input,\n            [e.target.name]: e.target.value\n        })\n    }\n\n    function handleSubmit() {\n        setLoading(true);\n        if (!file) input.logo = 'https://i.ibb.co/m82SNJT/profile-pic-startup-sin-marco.png';\n        input.isPremium = user.isPremium;\n        input.ownerId = user.id;\n        input.brightness = getBrightness(input.mainColor);\n        axios.post(`/projects/${user.username}`, input)\n            .then(res => {\n                if (file) {\n                    const newForm = new FormData();\n                    newForm.append('image', file);\n                    const config = {\n                        headers: {\n                            'content-type': 'multipart/form-data'\n                        }\n                    };\n                    return axios.post(`/projects/${res.data.id}/logo`, newForm, config);\n                } else window.location.replace('/admin/panel')\n            })\n            .then(res => window.location.replace('/admin/panel'))\n            .catch(err => setError(true))\n    }\n\n    function check(e) {\n        setFile(e.target.files[0]);\n        setPreview(URL.createObjectURL(e.target.files[0]));\n    }\n\n    if (firstCheck) {\n        return (\n            <img alt=\"Loading GIF\" id={style.firstCheck} src={Loading} />\n        )\n    }\n\n    return (\n        <div className='displayFlex'>\n            <div id={style.fixedDiv}>\n                <div id={style.logoDiv}>\n                    <Link to={`/user/${user.username}`}><img alt=\"Project logo\" src={Logo} id={style.invertedLogo} /></Link>\n                </div>\n                <Link id={style.link} to={`/admin/panel`}><span className='font200'><i class=\"fas fa-door-open\"></i> Back to Admin Panel</span></Link>\n            </div>\n            <div id={style.secondDiv}>\n                <h1 className='font800'>Let's start.</h1>\n                <p className='font200'>\n                    Provide the necessary information for developers to fully understand what your project is about. <br />\n                    Remember, the more details you provide, the more users will be interested in what you are doing. <br />\n                    Don't worry, you can always edit this later! <br />\n                </p>\n                <div className='displayFlexColumn'>\n                    <span className='font600'>Project name *</span>\n                    <input maxLength='100' onChange={(e) => handleInputChange(e)} name='name' className={style.input} />\n                </div>\n                <div className='displayFlexColumn'>\n                    <span className='font600'>Logo *</span>\n                    <div id={style.profilePicDiv}>\n                        <div id={style.profilePic}><img alt=\"Selected project logo\" src={preview} ID={style.logo} /></div>\n                        <label for={style.fileDrop} id={style.logoLabel}>\n                            <i class=\"fas fa-cloud-upload-alt\"></i> Upload Logo\n                        </label>\n                        <input onChange={(e) => check(e)} id={style.fileDrop} type='file' />\n                    </div>\n                </div>\n                <div className='displayFlexColumn'>\n                    <span style={{ marginBottom: '25px' }} className='font600'>Main color *</span>\n                    <BlockPicker onChange={(e) => handleInputChange(e)} color={input.mainColor} triangle={'hide'} />\n                </div>\n                <div style={{ marginTop: '25px' }} className='displayFlexColumn'>\n                    <span className='font600'>Website</span>\n                    <input style={{ border: inputErrors.website ? '2px solid red' : '2px solid #e7e7e7' }} maxLength='255' onChange={(e) => handleInputChange(e)} name='website' className={style.input} />\n                    {inputErrors.website && <span className={style.errors}>Please enter a valid URL.</span>}\n                </div>\n                <div className='displayFlexColumn'>\n                    <span className='font600'>Work Zone *</span>\n                    <span className='advert'>Keep in mind that it will be your team's designated workspace. It can be a link to Slack,<br /> Flowdock or WebEx, for example.</span>\n                    <input style={{ border: inputErrors.workZone ? '2px solid red' : '2px solid #e7e7e7' }} maxLength='255' onChange={(e) => handleInputChange(e)} value={input.workZone} name='workZone' className={style.input} />\n                    {inputErrors.workZone && <span className={style.errors}>Please enter a valid URL.</span>}\n                </div>\n                <div id={style.socialDiv}>\n                    <div className='displayFlexColumn' id='alignItemsFS'>\n                        <span className='font800'><i style={{ color: '#DA552F' }} class=\"fab fa-product-hunt\"></i> Product Hunt</span>\n                        <input style={{ border: inputErrors.productHunt ? '2px solid red' : '2px solid #e7e7e7' }} maxLength='255' name='productHunt' onChange={(e) => handleInputChange(e)} className={style.socialMediaInput} />\n                        {inputErrors.productHunt && <span className={style.errors}>Please enter a valid URL.</span>}\n                    </div>\n                    <div className='displayFlexColumn' id='alignItemsFS'>\n                        <span className='font800'><i style={{ color: ' #00acee' }} class=\"fab fa-twitter-square\"></i> Twitter</span>\n                        <input style={{ border: inputErrors.twitter ? '2px solid red' : '2px solid #e7e7e7' }} maxLength='255' name='twitter' onChange={(e) => handleInputChange(e)} className={style.socialMediaInput} />\n                        {inputErrors.twitter && <span className={style.errors}>Please enter a valid URL.</span>}\n                    </div>\n                    <div className='displayFlexColumn' id='alignItemsFS'>\n                        <span className='font800'><i style={{ color: '#0e76a8' }} class=\"fab fa-linkedin\"></i> LinkedIn</span>\n                        <input style={{ border: inputErrors.linkedIn ? '2px solid red' : '2px solid #e7e7e7' }} maxLength='255' name='linkedIn' onChange={(e) => handleInputChange(e)} className={style.socialMediaInput} />\n                        {inputErrors.linkedIn && <span className={style.errors}>Please enter a valid URL.</span>}\n                    </div>\n                </div>\n                <div className='displayFlexColumn'>\n                    <span className='font600'>One-line description *</span>\n                    <span className='advert'>Describe your project in just a few words.</span>\n                    <input maxLength=\"100\" onChange={(e) => handleInputChange(e)} name='oneLineDescription' className={style.input} />\n                </div>\n                <div className='displayFlexColumn'>\n                    <span className='font600' >Describe your project *</span>\n                    <textarea onChange={(e) => handleInputChange(e)} name='description' maxLength=\"2000\" className={style.textarea} />\n                </div>\n                {error && <div id={style.alert} class=\"alert alert-danger\" role=\"alert\">Please complete all the necessary fields.</div>}\n                {loading && !error ? <img alt=\"Loading GIF\" id={style.loading} src={Loading} /> : <button disabled={btnDisabled} onClick={handleSubmit} id={style.uploadBtn}>Post your project!</button>}\n            </div>\n        </div>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        user: state.userInfo,\n        limitOfPosts: state.limitOfPosts\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        setUserInfo: username => dispatch(setUserInfo(username))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PostStartup);"]},"metadata":{},"sourceType":"module"}