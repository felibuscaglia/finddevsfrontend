{"ast":null,"code":"import _regeneratorRuntime from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/felipebuscaglia/Henry/FindDevs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import style from'./PostStartup.module.css';import{Link}from'react-router-dom';import axios from'axios';import{connect}from'react-redux';import{BlockPicker}from'react-color';import{getBrightness}from'../../utils';import Loading from'../../Media/Loading.gif';import UserCard from'./UserSettingsCard';import Confirmation from'../../Components/PopUps/Confirmation';import{setUserInfo as _setUserInfo}from'../../Actions/index';import jwt from'jsonwebtoken';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProjectSettings(_ref){var user=_ref.user,projectID=_ref.projectID,setUserInfo=_ref.setUserInfo;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),input=_useState2[0],setInput=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),preview=_useState4[0],setPreview=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),firstCheck=_useState12[0],setFirstCheck=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),inputErrors=_useState14[0],setInputErrors=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),btnDisabled=_useState16[0],setDisabled=_useState16[1];function asyncUseEffect(_x){return _asyncUseEffect.apply(this,arguments);}function _asyncUseEffect(){_asyncUseEffect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return setUserInfo(username);case 2:case\"end\":return _context.stop();}}},_callee);}));return _asyncUseEffect.apply(this,arguments);}useEffect(function(){if(!user.username){var _user=jwt.decode(JSON.parse(localStorage.getItem('user')));if(_user){asyncUseEffect(_user.username);}else window.location.replace('/error');}axios.get(\"/projects/\".concat(projectID)).then(function(projectData){var userFound=projectData.data.users.find(function(member){return member.id===user.id;});if(projectData.data.isDeleted||!userFound||!userFound.userXprojects.isFounder)window.location.replace('/error');setPreview(projectData.data.logo);setInput(projectData.data);setTimeout(function(){setFirstCheck(false);},2000);}).catch(function(err){return console.log(err);});},[]);function handleInputChange(e){var copyOfErrors=inputErrors;var noErrors=true;if(e.hex)return setInput(_objectSpread(_objectSpread({},input),{},{mainColor:e.hex}));if(e.target.name==='website'||e.target.name==='workZone'||e.target.name==='productHunt'||e.target.name==='twitter'||e.target.name==='linkedIn'){if(!/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/.test(e.target.value))copyOfErrors=_objectSpread(_objectSpread({},copyOfErrors),{},_defineProperty({},e.target.name,true));else copyOfErrors=_objectSpread(_objectSpread({},copyOfErrors),{},_defineProperty({},e.target.name,false));}for(var key in copyOfErrors){if(copyOfErrors[key])noErrors=false;}if(noErrors)setDisabled(false);else setDisabled(true);setInputErrors(copyOfErrors);setInput(_objectSpread(_objectSpread({},input),{},_defineProperty({},e.target.name,e.target.value)));}function handleSubmit(){setLoading(true);input.brightness=getBrightness(input.mainColor);axios.patch(\"/projects/\".concat(projectID),input).then(function(res){if(file){var newForm=new FormData();newForm.append('image',file);var config={headers:{'content-type':'multipart/form-data'}};return axios.post(\"/projects/\".concat(projectID,\"/logo\"),newForm,config);}else return window.location.replace('/admin/panel');}).then(function(res){return window.location.replace('/admin/panel');}).catch(function(err){return setError(true);});}function check(e){setFile(e.target.files[0]);setPreview(URL.createObjectURL(e.target.files[0]));}if(firstCheck){return/*#__PURE__*/_jsx(\"img\",{alt:\"Loading GIF\",src:Loading,id:style.firstCheck});}return/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlex\",children:[/*#__PURE__*/_jsxs(\"div\",{id:style.fixedDiv,children:[/*#__PURE__*/_jsx(\"div\",{id:style.logoDivS,children:/*#__PURE__*/_jsx(Link,{to:\"/project/profile/\".concat(projectID),children:/*#__PURE__*/_jsx(\"img\",{alt:\"Project logo redirect\",src:input.logo,id:style.invertedLogoSettings})})}),/*#__PURE__*/_jsx(Link,{id:style.link,to:\"/admin/panel\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font200\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-door-open\"}),\" Back to Admin Panel\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{id:style.secondDiv,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font800\",children:\"Project Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"Project name *\"}),/*#__PURE__*/_jsx(\"input\",{value:input.name,maxLength:\"255\",onChange:function onChange(e){return handleInputChange(e);},name:\"name\",className:style.input})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"Logo *\"}),/*#__PURE__*/_jsxs(\"div\",{id:style.profilePicDiv,children:[/*#__PURE__*/_jsx(\"div\",{id:style.profilePic,children:/*#__PURE__*/_jsx(\"img\",{alt:\"Project logo\",src:preview,ID:style.logo})}),/*#__PURE__*/_jsxs(\"label\",{for:style.fileDrop,id:style.logoLabel,children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-cloud-upload-alt\"}),\" Upload Logo\"]}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return check(e);},id:style.fileDrop,type:\"file\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{style:{marginBottom:'25px'},className:\"font600\",children:\"Main color *\"}),/*#__PURE__*/_jsx(BlockPicker,{onChange:function onChange(e){return handleInputChange(e);},color:input.mainColor,triangle:'hide'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'25px'},className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"Website\"}),/*#__PURE__*/_jsx(\"input\",{style:{border:inputErrors.website?'2px solid red':'2px solid #e7e7e7'},value:input.website,maxLength:\"255\",onChange:function onChange(e){return handleInputChange(e);},name:\"website\",className:style.input}),inputErrors.website&&/*#__PURE__*/_jsx(\"span\",{className:style.errors,children:\"Please enter a valid URL.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"Work Zone *\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"advert\",children:[\"Keep in mind that it will be your team's designated workspace. It can be a link to Slack,\",/*#__PURE__*/_jsx(\"br\",{}),\" Flowdock or WebEx, for example.\"]}),/*#__PURE__*/_jsx(\"input\",{style:{border:inputErrors.workZone?'2px solid red':'2px solid #e7e7e7'},maxLength:\"255\",onChange:function onChange(e){return handleInputChange(e);},value:input.workZone,name:\"workZone\",className:style.input}),inputErrors.workZone&&/*#__PURE__*/_jsx(\"span\",{className:style.errors,children:\"Please enter a valid URL.\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:style.socialDiv,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",id:\"alignItemsFS\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font800\",children:[/*#__PURE__*/_jsx(\"i\",{style:{color:'#DA552F'},class:\"fab fa-product-hunt\"}),\" Product Hunt\"]}),/*#__PURE__*/_jsx(\"input\",{style:{border:inputErrors.productHunt?'2px solid red':'2px solid #e7e7e7'},value:input.productHunt,maxLength:\"255\",name:\"productHunt\",onChange:function onChange(e){return handleInputChange(e);},className:style.socialMediaInput}),inputErrors.productHunt&&/*#__PURE__*/_jsx(\"span\",{className:style.errors,children:\"Please enter a valid URL.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",id:\"alignItemsFS\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font800\",children:[/*#__PURE__*/_jsx(\"i\",{style:{color:' #00acee'},class:\"fab fa-twitter-square\"}),\" Twitter\"]}),/*#__PURE__*/_jsx(\"input\",{style:{border:inputErrors.twitter?'2px solid red':'2px solid #e7e7e7'},value:input.twitter,maxLength:\"255\",name:\"twitter\",onChange:function onChange(e){return handleInputChange(e);},className:style.socialMediaInput}),inputErrors.twitter&&/*#__PURE__*/_jsx(\"span\",{className:style.errors,children:\"Please enter a valid URL.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",id:\"alignItemsFS\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"font800\",children:[/*#__PURE__*/_jsx(\"i\",{style:{color:'#0e76a8'},class:\"fab fa-linkedin\"}),\" LinkedIn\"]}),/*#__PURE__*/_jsx(\"input\",{style:{border:inputErrors.linkedIn?'2px solid red':'2px solid #e7e7e7'},value:input.linkedIn,maxLength:\"255\",name:\"linkedIn\",onChange:function onChange(e){return handleInputChange(e);},className:style.socialMediaInput}),inputErrors.linkedIn&&/*#__PURE__*/_jsx(\"span\",{className:style.errors,children:\"Please enter a valid URL.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"One-line description *\"}),/*#__PURE__*/_jsx(\"span\",{className:\"advert\",children:\"Describe your project in just a few words.\"}),/*#__PURE__*/_jsx(\"input\",{value:input.oneLineDescription,maxLength:\"100\",onChange:function onChange(e){return handleInputChange(e);},name:\"oneLineDescription\",className:style.input})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlexColumn\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font600\",children:\"Describe your project *\"}),/*#__PURE__*/_jsx(\"textarea\",{value:input.description,onChange:function onChange(e){return handleInputChange(e);},name:\"description\",maxLength:\"2000\",className:style.textarea})]}),/*#__PURE__*/_jsx(\"div\",{children:input.users&&input.users.map(function(user){return!user.userXprojects.isFounder?/*#__PURE__*/_jsx(UserCard,{user:user,projectID:input.id},user.id):null;})}),error&&/*#__PURE__*/_jsx(\"div\",{id:style.alert,class:\"alert alert-danger\",role:\"alert\",children:\"Please complete all the necessary fields.\"}),loading&&!error?/*#__PURE__*/_jsx(\"img\",{alt:\"Loading GIF\",id:style.loading,src:Loading}):/*#__PURE__*/_jsxs(\"div\",{id:style.btnDiv,children:[/*#__PURE__*/_jsx(\"button\",{disabled:btnDisabled,onClick:handleSubmit,id:style.uploadBtn,children:\"Update your project\"}),/*#__PURE__*/_jsx(Confirmation,{project:input})]})]})]});}function mapStateToProps(state){return{user:state.userInfo};}function mapDispatchToProps(dispatch){return{setUserInfo:function setUserInfo(username){return dispatch(_setUserInfo(username));}};}export default connect(mapStateToProps,mapDispatchToProps)(ProjectSettings);","map":{"version":3,"sources":["/Users/felipebuscaglia/Henry/FindDevs/client/src/Screens/PostStartup/ProjectSettings.jsx"],"names":["React","useState","useEffect","style","Link","axios","connect","BlockPicker","getBrightness","Loading","UserCard","Confirmation","setUserInfo","jwt","ProjectSettings","user","projectID","input","setInput","preview","setPreview","file","setFile","error","setError","loading","setLoading","firstCheck","setFirstCheck","inputErrors","setInputErrors","btnDisabled","setDisabled","asyncUseEffect","username","decode","JSON","parse","localStorage","getItem","window","location","replace","get","then","projectData","userFound","data","users","find","member","id","isDeleted","userXprojects","isFounder","logo","setTimeout","catch","err","console","log","handleInputChange","e","copyOfErrors","noErrors","hex","mainColor","target","name","test","value","key","handleSubmit","brightness","patch","res","newForm","FormData","append","config","headers","post","check","files","URL","createObjectURL","fixedDiv","logoDivS","invertedLogoSettings","link","secondDiv","profilePicDiv","profilePic","fileDrop","logoLabel","marginBottom","marginTop","border","website","errors","workZone","socialDiv","color","productHunt","socialMediaInput","twitter","linkedIn","oneLineDescription","description","textarea","map","alert","btnDiv","uploadBtn","mapStateToProps","state","userInfo","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport style from './PostStartup.module.css';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { BlockPicker } from 'react-color';\nimport { getBrightness } from '../../utils';\nimport Loading from '../../Media/Loading.gif';\nimport UserCard from './UserSettingsCard';\nimport Confirmation from '../../Components/PopUps/Confirmation';\nimport { setUserInfo } from '../../Actions/index';\nimport jwt from 'jsonwebtoken';\n\nfunction ProjectSettings({ user, projectID, setUserInfo }) {\n\n    const [input, setInput] = useState({});\n    const [preview, setPreview] = useState(null);\n    const [file, setFile] = useState(null);\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(false);\n    const [firstCheck, setFirstCheck] = useState (true);\n    const [inputErrors, setInputErrors] = useState ({});\n    const [btnDisabled, setDisabled] = useState (false);\n\n    async function asyncUseEffect(username) {\n        await (setUserInfo(username));\n    }\n\n    useEffect(() => {\n        if (!user.username) {\n            const user = jwt.decode(JSON.parse(localStorage.getItem('user')))\n            if (user) {\n                asyncUseEffect(user.username);\n            } else window.location.replace('/error');\n        }\n        axios.get(`/projects/${projectID}`)\n            .then(projectData => {\n                const userFound = projectData.data.users.find (member => member.id === user.id);\n                if (projectData.data.isDeleted || !userFound || !userFound.userXprojects.isFounder) window.location.replace ('/error'); \n                setPreview(projectData.data.logo)\n                setInput(projectData.data);\n                setTimeout (() => {\n                    setFirstCheck (false);\n                }, 2000)\n            })\n            .catch(err => console.log(err))\n    }, [])\n\n    function handleInputChange(e) {\n        var copyOfErrors = inputErrors;\n        var noErrors = true;\n\n        if (e.hex) return setInput({ ...input, mainColor: e.hex });\n\n        if (e.target.name === 'website' || e.target.name === 'workZone' || e.target.name === 'productHunt' || e.target.name === 'twitter' || e.target.name === 'linkedIn') {\n            if (!/https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)/.test(e.target.value)) copyOfErrors = { ...copyOfErrors, [e.target.name]: true };\n            else copyOfErrors = { ...copyOfErrors, [e.target.name]: false }\n        }\n\n        for (const key in copyOfErrors) if (copyOfErrors[key]) noErrors = false;\n\n        if (noErrors) setDisabled(false);\n        else setDisabled(true);\n\n        setInputErrors(copyOfErrors);\n\n        setInput({\n            ...input,\n            [e.target.name]: e.target.value\n        })\n    }\n\n    function handleSubmit() {\n        setLoading(true);\n        input.brightness = getBrightness (input.mainColor);\n        axios.patch(`/projects/${projectID}`, input)\n            .then(res => {\n                if (file) {\n                    const newForm = new FormData();\n                    newForm.append('image', file);\n                    const config = {\n                        headers: {\n                            'content-type': 'multipart/form-data'\n                        }\n                    };\n                    return axios.post(`/projects/${projectID}/logo`, newForm, config);\n                } else return window.location.replace ('/admin/panel')\n            })\n            .then(res => window.location.replace('/admin/panel'))\n            .catch(err => setError(true))\n    }\n\n    function check(e) {\n        setFile(e.target.files[0]);\n        setPreview(URL.createObjectURL(e.target.files[0]));\n    }\n\n    if (firstCheck) {\n        return (\n            <img alt=\"Loading GIF\" src={Loading} id={style.firstCheck} />\n        )\n    }\n\n    return (\n        <div className='displayFlex'>\n            <div id={style.fixedDiv} >\n                <div id={style.logoDivS}>\n                    <Link to={`/project/profile/${projectID}`}><img alt=\"Project logo redirect\" src={input.logo} id={style.invertedLogoSettings} /></Link>\n                </div>\n                <Link id={style.link} to={`/admin/panel`}><span className='font200'><i class=\"fas fa-door-open\"></i> Back to Admin Panel</span></Link>\n            </div>\n            <div id={style.secondDiv}>\n                <h1 className='font800'>Project Settings</h1>\n                <div className='displayFlexColumn'>\n                    <span className='font600'>Project name *</span>\n                    <input value={input.name} maxLength='255' onChange={(e) => handleInputChange(e)} name='name' className={style.input} />\n                </div>\n                <div className='displayFlexColumn'>\n                    <span className='font600'>Logo *</span>\n                    <div id={style.profilePicDiv}>\n                        <div id={style.profilePic}><img alt=\"Project logo\" src={preview} ID={style.logo} /></div>\n                        <label for={style.fileDrop} id={style.logoLabel}>\n                            <i class=\"fas fa-cloud-upload-alt\"></i> Upload Logo\n                        </label>\n                        <input onChange={(e) => check(e)} id={style.fileDrop} type='file' />\n                    </div>\n                </div>\n                <div className='displayFlexColumn'>\n                    <span style={{ marginBottom: '25px' }} className='font600'>Main color *</span>\n                    <BlockPicker onChange={(e) => handleInputChange(e)} color={input.mainColor} triangle={'hide'} />\n                </div>\n                <div style={{ marginTop: '25px' }} className='displayFlexColumn'>\n                    <span className='font600'>Website</span>\n                    <input style={{ border: inputErrors.website ? '2px solid red' : '2px solid #e7e7e7' }} value={input.website} maxLength='255' onChange={(e) => handleInputChange(e)} name='website' className={style.input} />\n                    {inputErrors.website && <span className={style.errors}>Please enter a valid URL.</span>}\n                </div>\n                <div className='displayFlexColumn'>\n                    <span className='font600'>Work Zone *</span>\n                    <span className='advert'>Keep in mind that it will be your team's designated workspace. It can be a link to Slack,<br /> Flowdock or WebEx, for example.</span>\n                    <input style={{ border: inputErrors.workZone ? '2px solid red' : '2px solid #e7e7e7' }} maxLength='255' onChange={(e) => handleInputChange(e)} value={input.workZone} name='workZone' className={style.input} />\n                    {inputErrors.workZone && <span className={style.errors}>Please enter a valid URL.</span>}\n                </div>\n                <div id={style.socialDiv}>\n                    <div className='displayFlexColumn' id='alignItemsFS'>\n                        <span className='font800'><i style={{ color: '#DA552F' }} class=\"fab fa-product-hunt\"></i> Product Hunt</span>\n                        <input style={{ border: inputErrors.productHunt ? '2px solid red' : '2px solid #e7e7e7' }} value={input.productHunt} maxLength='255' name='productHunt' onChange={(e) => handleInputChange(e)} className={style.socialMediaInput} />\n                        {inputErrors.productHunt && <span className={style.errors}>Please enter a valid URL.</span>}\n                    </div>\n                    <div className='displayFlexColumn' id='alignItemsFS'>\n                        <span className='font800'><i style={{ color: ' #00acee' }} class=\"fab fa-twitter-square\"></i> Twitter</span>\n                        <input style={{ border: inputErrors.twitter ? '2px solid red' : '2px solid #e7e7e7' }} value={input.twitter} maxLength='255' name='twitter' onChange={(e) => handleInputChange(e)} className={style.socialMediaInput} />\n                        {inputErrors.twitter && <span className={style.errors}>Please enter a valid URL.</span>}\n                    </div>\n                    <div className='displayFlexColumn' id='alignItemsFS'>\n                        <span className='font800'><i style={{ color: '#0e76a8' }} class=\"fab fa-linkedin\"></i> LinkedIn</span>\n                        <input style={{ border: inputErrors.linkedIn ? '2px solid red' : '2px solid #e7e7e7' }} value={input.linkedIn} maxLength='255' name='linkedIn' onChange={(e) => handleInputChange(e)} className={style.socialMediaInput} />\n                        {inputErrors.linkedIn && <span className={style.errors}>Please enter a valid URL.</span>}\n                    </div>\n                </div>\n                <div className='displayFlexColumn'>\n                    <span className='font600'>One-line description *</span>\n                    <span className='advert'>Describe your project in just a few words.</span>\n                    <input value={input.oneLineDescription} maxLength=\"100\" onChange={(e) => handleInputChange(e)} name='oneLineDescription' className={style.input} />\n                </div>\n                <div className='displayFlexColumn'>\n                    <span className='font600'>Describe your project *</span>\n                    <textarea value={input.description} onChange={(e) => handleInputChange(e)} name='description' maxLength=\"2000\" className={style.textarea} />\n                </div>\n                <div>\n                    {input.users && input.users.map(user => !user.userXprojects.isFounder ? <UserCard key={user.id} user={user} projectID={input.id} /> : null)}\n                </div>\n                {error && <div id={style.alert} class=\"alert alert-danger\" role=\"alert\">Please complete all the necessary fields.</div>}\n                {loading && !error ? <img alt=\"Loading GIF\" id={style.loading} src={Loading} /> :\n                    <div id={style.btnDiv}>\n                        <button disabled={btnDisabled} onClick={handleSubmit} id={style.uploadBtn}>Update your project</button>\n                        <Confirmation project={input} />\n                    </div>}\n            </div>\n        </div>\n    )\n}\n\nfunction mapStateToProps(state) {\n    return {\n        user: state.userInfo\n    }\n}\n\nfunction mapDispatchToProps (dispatch) {\n    return {\n        setUserInfo: username => dispatch(setUserInfo(username))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectSettings);"]},"metadata":{},"sourceType":"module"}