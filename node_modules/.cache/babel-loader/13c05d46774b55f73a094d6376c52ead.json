{"ast":null,"code":"import _regeneratorRuntime from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/felipebuscaglia/Henry/finddevsfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useLayoutEffect,useState}from'react';import style from'./JobPanel.module.css';import axios from'axios';import{Link}from'react-router-dom';import JobCard from'../../JobListing/JobCardProfile';import Empty from\"../../../Media/emptyJob.svg\";import Loading from'../../../Media/Loading.gif';import jwt from'jsonwebtoken';import{setUserInfo as _setUserInfo}from'../../../Actions/index';import{connect}from'react-redux';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faDoorOpen}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function JobPanel(_ref){var projectID=_ref.projectID,setUserInfo=_ref.setUserInfo,user=_ref.user;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),project=_useState2[0],setProject=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];function asyncUseEffect(_x,_x2){return _asyncUseEffect.apply(this,arguments);}function _asyncUseEffect(){_asyncUseEffect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username,userId){var projectData,userFound;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return setUserInfo(username);case 2:_context.prev=2;_context.next=5;return axios.get(\"/projects/\".concat(projectID));case 5:projectData=_context.sent;_context.next=8;return projectData.data.users.find(function(member){return member.id===userId;});case 8:userFound=_context.sent;if(!userFound||userFound.userXprojects.isFounder===false||projectData.data.isDeleted)window.location.replace('/error');setProject(projectData.data);setTimeout(function(){setLoading(false);},1000);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return _asyncUseEffect.apply(this,arguments);}useLayoutEffect(function(){var user=jwt.decode(JSON.parse(localStorage.getItem('user')));if(user){asyncUseEffect(user.username,user.id);}else window.location.replace('/error');},[]);if(loading){return/*#__PURE__*/_jsx(\"img\",{alt:\"Loading GIF\",src:Loading,id:style.loading});}return/*#__PURE__*/_jsxs(\"div\",{className:\"displayFlex\",children:[/*#__PURE__*/_jsxs(\"div\",{id:style.fixedDiv,children:[/*#__PURE__*/_jsx(\"div\",{id:style.logoDiv,children:/*#__PURE__*/_jsx(Link,{to:\"/project/profile/\".concat(projectID),children:/*#__PURE__*/_jsx(\"img\",{alt:\"Project logo\",src:project.logo,id:style.invertedLogo})})}),/*#__PURE__*/_jsx(Link,{id:style.link,to:\"/admin/panel\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"font200\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faDoorOpen}),\" Back to Admin Panel\"]})})]}),project.jobOpportunities&&project.jobOpportunities.length>0?/*#__PURE__*/_jsxs(\"div\",{id:style.secondDiv,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font800\",children:\"Job Panel\"}),/*#__PURE__*/_jsx(\"div\",{id:style.jobDiv,children:project.jobOpportunities&&project.jobOpportunities.map(function(job){return/*#__PURE__*/_jsx(JobCard,{isJobPanel:true,project:project,job:job},job.id);})}),/*#__PURE__*/_jsx(Link,{className:\"links\",to:\"/project/addJob/\".concat(projectID),children:/*#__PURE__*/_jsx(\"span\",{id:style.addBtn,children:\"Post a job\"})})]}):/*#__PURE__*/_jsxs(\"div\",{id:style.emptyDiv,children:[/*#__PURE__*/_jsx(\"img\",{alt:\"No jobs posted\",src:Empty,id:style.empty}),/*#__PURE__*/_jsxs(\"div\",{id:style.innerEmptyDiv,children:[/*#__PURE__*/_jsx(\"h1\",{style:{marginBottom:'25px'},className:\"font800\",children:\"No jobs posted.\"}),/*#__PURE__*/_jsx(Link,{className:\"links\",to:\"/project/addJob/\".concat(projectID),children:/*#__PURE__*/_jsx(\"span\",{id:style.addBtn2,children:\"Post a job\"})})]})]})]});}function mapStateToProps(state){return{user:state.userInfo};}function mapDispatchToProps(dispatch){return{setUserInfo:function setUserInfo(username){return dispatch(_setUserInfo(username));}};}export default connect(mapStateToProps,mapDispatchToProps)(JobPanel);","map":{"version":3,"sources":["/Users/felipebuscaglia/Henry/finddevsfrontend/src/Screens/StartupAdminPanel/JobPanel/JobPanel.jsx"],"names":["React","useLayoutEffect","useState","style","axios","Link","JobCard","Loading","jwt","setUserInfo","connect","FontAwesomeIcon","faDoorOpen","JobPanel","projectID","user","project","setProject","loading","setLoading","asyncUseEffect","username","userId","get","projectData","data","users","find","member","id","userFound","userXprojects","isFounder","isDeleted","window","location","replace","setTimeout","console","log","decode","JSON","parse","localStorage","getItem","fixedDiv","logoDiv","logo","invertedLogo","link","jobOpportunities","length","secondDiv","jobDiv","map","job","addBtn","emptyDiv","Empty","empty","innerEmptyDiv","marginBottom","addBtn2","mapStateToProps","state","userInfo","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useLayoutEffect, useState } from 'react';\nimport style from './JobPanel.module.css';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport JobCard from '../../JobListing/JobCardProfile';\nimport Empty from '../../../Media/emptyJob.svg';\nimport Loading from '../../../Media/Loading.gif';\nimport jwt from 'jsonwebtoken';\nimport { setUserInfo } from '../../../Actions/index';\nimport { connect } from 'react-redux';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faDoorOpen } from '@fortawesome/free-solid-svg-icons';\n\nfunction JobPanel({ projectID, setUserInfo, user }) {\n    const [project, setProject] = useState({});\n    const [loading, setLoading] = useState (true);\n\n    async function asyncUseEffect(username, userId) {\n        await (setUserInfo(username));\n        try {\n            const projectData = await axios.get(`/projects/${projectID}`);\n            const userFound = await projectData.data.users.find(member => member.id === userId);\n            if (!userFound || userFound.userXprojects.isFounder === false || projectData.data.isDeleted) window.location.replace('/error');\n            setProject(projectData.data);\n            setTimeout(() => {\n                setLoading(false);\n            }, 1000)\n        } catch (err) {\n            console.log(err)\n        }\n    }\n\n    useLayoutEffect(() => {\n        const user = jwt.decode(JSON.parse(localStorage.getItem('user')))\n        if (user) {\n            asyncUseEffect(user.username, user.id);\n        } else window.location.replace ('/error');\n    }, [])\n\n    if (loading) {\n        return (\n            <img alt=\"Loading GIF\" src={Loading} id={style.loading} />\n        )\n    }\n\n    return (\n        <div className='displayFlex'>\n            <div id={style.fixedDiv}>\n                <div id={style.logoDiv}>\n                    <Link to={`/project/profile/${projectID}`}><img alt=\"Project logo\" src={project.logo} id={style.invertedLogo} /></Link>\n                </div>\n                <Link id={style.link} to={`/admin/panel`}><span className='font200'><FontAwesomeIcon icon={faDoorOpen} /> Back to Admin Panel</span></Link>\n            </div>\n            {project.jobOpportunities && project.jobOpportunities.length > 0 ?\n                <div id={style.secondDiv}>\n                    <h1 className='font800'>Job Panel</h1>\n                    <div id={style.jobDiv}>\n                        {project.jobOpportunities && project.jobOpportunities.map(job => <JobCard key={job.id} isJobPanel={true} project={project} job={job} />)}\n                    </div>\n                    <Link className='links' to={`/project/addJob/${projectID}`}><span id={style.addBtn}>Post a job</span></Link>\n                </div> :\n                <div id={style.emptyDiv}>\n                    <img alt=\"No jobs posted\" src={Empty} id={style.empty} />\n                    <div id={style.innerEmptyDiv}>\n                        <h1 style={{ marginBottom: '25px' }} className='font800'>No jobs posted.</h1>\n                        <Link className='links' to={`/project/addJob/${projectID}`}><span id={style.addBtn2}>Post a job</span></Link>\n                    </div>\n                </div>}\n        </div>\n    )\n}\n\nfunction mapStateToProps (state) {\n    return {\n        user: state.userInfo\n    }\n} \n\nfunction mapDispatchToProps (dispatch) {\n    return {\n        setUserInfo: username => dispatch(setUserInfo(username))\n    }\n}\n\nexport default connect (mapStateToProps, mapDispatchToProps)(JobPanel);"]},"metadata":{},"sourceType":"module"}